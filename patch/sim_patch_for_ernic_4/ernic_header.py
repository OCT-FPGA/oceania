#!/usr/bin/env python3
#==============================================================================
# Copyright (C) 2023, Advanced Micro Devices, Inc. All rights reserved.
# SPDX-License-Identifier: MIT
#
#==============================================================================

## This file descripes control registers used in ERNIC

# Global Control Status Register (CSR) offset
XRNICCONF        = 0x00100000
XRNICADCONF      = 0x00100004
MACXADDLSB       = 0x00100010
MACXADDMSB       = 0x00100014
IPv6XADD1        = 0x00100020
IPv6XADD2        = 0x00100024
IPv6XADD3        = 0x00100028
IPv6XADD4        = 0x0010002C
XRNIC_CONF_QP_EN = 0x00100044
IPv4XADD         = 0x00100070
ERRBUFBA         = 0x00100060
ERRBUFBAMSB      = 0x00100064
ERRBUFSZ         = 0x00100068
IPKTERRQBA       = 0x00100088
IPKTERRQBAMSB    = 0x0010008C
IPKTERRQSZ       = 0x00100090
DATBUFBA         = 0x001000A0
DATBUFBAMSB      = 0x001000A4
DATBUFSZ         = 0x001000A8
RESPERRPKTBA     = 0x001000B0
RESPERRPKTBAMSB  = 0x001000B4
RESPERRSZ        = 0x001000B8
RESPERRSZMSB     = 0x001000BC
INTEN            = 0x00100180
STATCURSQPTRi    = 0x0010028C
STATMSN          = 0x00100284

# Global status register (GSR) offset, Read-only
ERRBUFWPTR      = 0x0010006C
IPKTERRQWPTR    = 0x00100094
INSRRPKTCNT     = 0x00100100  
INAMPKTCNT      = 0x00100104
OUTIOPKTCNT     = 0x00100108
OUTAMPKTCNT     = 0x0010010C
LSTINPKT        = 0x00100110
LSTOUTPKT       = 0x00100114
ININVDUPCNT     = 0x00100118
INNCKPKTSTS     = 0x0010011C
OUTRNRPKTSTS    = 0x00100120
WQEPROCSTS      = 0x00100124
QPMSTS          = 0x0010012C
INALLDRPPKTCNT  = 0x00100130
INNAKPKTCNT     = 0x00100134
OUTNAKPKTCNT    = 0x00100138
RESPHNDSTS      = 0x0010013C
RETRYCNTSTS     = 0x00100140
INCNPPKTCNT     = 0x00100174
OUTCNPPKTCNT    = 0x00100178
OUTRDRSPPKTCNT  = 0x0010017C
INTSTS          = 0x00100184
RQINTSTS1       = 0x00100190
RQINTSTS2       = 0x00100194
RQINTSTS3       = 0x00100198
RQINTSTS4       = 0x0010019C
RQINTSTS5       = 0x001001A0
RQINTSTS6       = 0x001001A4
RQINTSTS7       = 0x001001A8
RQINTSTS8       = 0x001001AC
CQINTSTS1       = 0X00100290
CQINTSTS2       = 0x00100294
CQINTSTS3       = 0X00100298
CQINTSTS4       = 0x0010029C
CQINTSTS5       = 0X001002A0
CQINTSTS6       = 0x001002A4
CQINTSTS7       = 0X001002A8
CQINTSTS8       = 0x001002AC
CNPSCHDSTS1REG  = 0X00100390
CNPSCHDSTS2REG  = 0X00100394
CNPSCHDSTS3REG  = 0X00100398
CNPSCHDSTS4REG  = 0X0010039C
CNPSCHDSTS5REG  = 0X001003A0
CNPSCHDSTS6REG  = 0X001003A4
CNPSCHDSTS7REG  = 0X001003A8
CNPSCHDSTS8REG  = 0X001003AC

# Protection domain table (PDT) register offset
PDPDNUM         = 0x00000000
VIRTADDRLSB     = 0x00000004
VIRTADDRMSB     = 0x00000008
BUFBASEADDRLSB  = 0x0000000C
BUFBASEADDRMSB  = 0x00000010
BUFRKEY         = 0x00000014
WRRDBUFLEN      = 0x00000018
ACCESSDESC      = 0x0000001C

# Per-queue CSR offset
QPCONFi         = 0x00180000
QPADVCONFi      = 0x00180004
RQBAi           = 0x00180008
RQBAMSBi        = 0x001800C0
SQBAi           = 0x00180010
SQBAMSBi        = 0x001800C8
CQBAi           = 0x00180018
CQBAMSBi        = 0x001800D0
RQWPTRDBADDi    = 0x00180020
RQWPTRDBADDMSBi = 0x00180024
CQDBADDi        = 0x00180028
CQDBADDMSBi     = 0x0018002C
RQCIi           = 0x00180034
SQPIi           = 0x00180038
QDEPTHi         = 0x0018003C
SQPSNi          = 0x00180040
LSTRQREQi       = 0x00180044
DESTQPCONFi     = 0x00180048
MACDESADDLSBi   = 0x00180050
MACDESADDMSBi   = 0x00180054
IPDESADDR1i     = 0x00180060
IPDESADDR2i     = 0x00180064
IPDESADDR3i     = 0x00180068
IPDESADDR4i     = 0x0018006C
PDi             = 0x001800B0

# Per-queue CSR Read-Only register offset
CQHEADi         = 0x00180030
STATSSNi        = 0x00180080
STATMSNi        = 0x00180084
STATQPi         = 0x00180088
STATCURSQPTRi   = 0x0018008C
STATRESPSNi     = 0x00180090
STATRQBUFCAi    = 0x00180094
STATRQBUFCAMSBi = 0x001800D8
STATWQEi        = 0x00180098
STATRQPIDBi     = 0x0018009C


# WQE opcodes: 8 bits
OP_WRITE     		= 0
OP_WRITE_IMMDT	= 1
OP_SEND		    	= 2
OP_SEND_IMMDT	  = 3
OP_READ		    	= 4
OP_SEND_INV	  	= 12

opcode_lst = ['write', 'write_immdt', 'send', 'send_immdt', 'read', 'send_inv']
location_lst = ['dev_mem','sys_mem']
dev_offset = 0xa350000000000000
